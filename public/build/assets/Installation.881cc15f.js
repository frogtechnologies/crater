import{a as L,d as ve,B as M,k as z,r as b,o as q,l as F,w as d,h as C,e as k,t as U,i as P,j as E,F as ne,y as ie,u as e,f as a,m as O,J as G,D as Q,q as oe,ag as re,a0 as j,ah as ee,L as y,M as D,aT as ae,T as W,U as T,aj as le,Q as H,x as Z,N as _e,O as be,P as $e,S as ue,aN as me}from"./vendor.8669b7df.js";import{h as R,b as te,j as ce,_ as se,u as de,e as ge,d as pe,L as we}from"./main.8525167c.js";import{u as X}from"./mail-driver.12e9c4e5.js";const A=(i=!1)=>{const V=i?window.pinia.defineStore:ve,u=te();return V({id:"installation",state:()=>({currentDataBaseData:{database_connection:"mysql",database_hostname:"127.0.0.1",database_port:"3306",database_name:null,database_username:null,database_password:null,app_url:window.location.origin}}),actions:{fetchInstallationRequirements(){return new Promise((r,n)=>{L.get("/api/v1/installation/requirements").then(m=>{r(m)}).catch(m=>{R(m),n(m)})})},fetchInstallationStep(){return new Promise((r,n)=>{L.get("/api/v1/installation/wizard-step").then(m=>{r(m)}).catch(m=>{R(m),n(m)})})},addInstallationStep(r){return new Promise((n,m)=>{L.post("/api/v1/installation/wizard-step",r).then(o=>{n(o)}).catch(o=>{R(o),m(o)})})},fetchInstallationPermissions(){return new Promise((r,n)=>{L.get("/api/v1/installation/permissions").then(m=>{r(m)}).catch(m=>{R(m),n(m)})})},fetchInstallationDatabase(r){return new Promise((n,m)=>{L.get("/api/v1/installation/database/config",{params:r}).then(o=>{n(o)}).catch(o=>{R(o),m(o)})})},addInstallationDatabase(r){return new Promise((n,m)=>{L.post("/api/v1/installation/database/config",r).then(o=>{n(o)}).catch(o=>{R(o),m(o)})})},addInstallationFinish(){return new Promise((r,n)=>{L.post("/api/v1/installation/finish").then(m=>{r(m)}).catch(m=>{R(m),n(m)})})},setInstallationDomain(r){return new Promise((n,m)=>{L.put("/api/v1/installation/set-domain",r).then(o=>{n(o)}).catch(o=>{R(o),m(o)})})},installationLogin(){return new Promise((r,n)=>{L.get("/sanctum/csrf-cookie").then(m=>{m&&L.post("/api/v1/installation/login").then(o=>{u.setSelectedCompany(o.data.company),r(o)}).catch(o=>{R(o),n(o)})})})},checkAutheticated(){return new Promise((r,n)=>{L.get("/api/v1/auth/check").then(m=>{r(m)}).catch(m=>{n(m)})})}}})()},he={class:"w-full md:w-2/3"},ye={class:"mb-6"},Ie={key:0,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},qe={class:"col-span-2 text-sm"},Be={class:"text-right"},Ce={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},Ve={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},De={key:1},Se={class:"col-span-2 text-sm"},Fe={class:"text-right"},Me={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},ze={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},ke={emits:["next"],setup(i,{emit:V}){const u=M(""),r=M(""),n=M(!1);M(!0);const m=A(),o=z(()=>{if(u.value){let f=!0;for(const s in u.value)return u.value[s]||(f=!1),u.value&&r.value.supported&&f}return!1});async function p(){n.value=!0;const f=await m.fetchInstallationRequirements();f.data&&(u.value=f?.data?.requirements?.requirements?.php,r.value=f?.data?.phpSupportInfo)}function l(){n.value=!0,V("next"),n.value=!1}return(f,s)=>{const I=b("BaseIcon"),t=b("BaseButton"),g=b("BaseWizardStep");return q(),F(g,{title:f.$t("wizard.req.system_req"),description:f.$t("wizard.req.system_req_desc")},{default:d(()=>[C("div",he,[C("div",ye,[r.value?(q(),k("div",Ie,[C("div",qe,U(f.$t("wizard.req.php_req_version",{version:r.value.minimum})),1),C("div",Be,[P(U(r.value.current)+" ",1),r.value.supported?(q(),k("span",Ce)):(q(),k("span",Ve))])])):E("",!0),u.value?(q(),k("div",De,[(q(!0),k(ne,null,ie(u.value,($,B)=>(q(),k("div",{key:B,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},[C("div",Se,U(B),1),C("div",Fe,[$?(q(),k("span",Me)):(q(),k("span",ze))])]))),128))])):E("",!0)]),e(o)?(q(),F(t,{key:0,onClick:l},{left:d($=>[a(I,{name:"ArrowRightIcon",class:O($.class)},null,8,["class"])]),default:d(()=>[P(U(f.$t("wizard.continue"))+" ",1)]),_:1})):E("",!0),u.value?E("",!0):(q(),F(t,{key:1,loading:n.value,disabled:n.value,onClick:p},{default:d(()=>[P(U(f.$t("wizard.req.check_req")),1)]),_:1},8,["loading","disabled"]))])]),_:1},8,["title","description"])}}},Ue={key:1,class:"relative"},Pe={class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4"},Ne={class:"col-span-2 p-3"},Ee={class:"p-3 text-right"},Ge={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-green-500"},Oe={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-red-500"},xe={emits:["next"],setup(i,{emit:V}){let u=M(!1),r=M(!1),n=M([]);const{tm:m,t:o}=G(),p=A(),l=ce();Q(()=>{f()});async function f(){u.value=!0;const I=await p.fetchInstallationPermissions();n.value=I.data.permissions.permissions,I.data&&I.data.permissions.errors&&setTimeout(()=>{l.openDialog({title:m("wizard.permissions.permission_confirm_title"),message:o("wizard.permissions.permission_confirm_desc"),yesLabel:"OK",noLabel:"Cancel",variant:"danger",hideNoButton:!1,size:"lg"}).then(t=>{t.data&&(u.value=!1)})},500),u.value=!1}function s(){r.value=!0,V("next"),r.value=!1}return(I,t)=>{const g=b("BaseContentPlaceholdersText"),$=b("BaseContentPlaceholdersBox"),B=b("BaseContentPlaceholders"),c=b("BaseIcon"),_=b("BaseButton"),v=b("BaseWizardStep");return q(),F(v,{title:I.$t("wizard.permissions.permissions"),description:I.$t("wizard.permissions.permission_desc")},{default:d(()=>[e(u)?(q(),F(B,{key:0},{default:d(()=>[(q(),k(ne,null,ie(3,(w,h)=>C("div",{key:h,class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4 border border-gray-200"},[a(g,{lines:1,class:"col-span-4 p-3"})])),64)),a($,{rounded:!0,class:"mt-10",style:{width:"96px",height:"42px"}})]),_:1})):(q(),k("div",Ue,[(q(!0),k(ne,null,ie(e(n),(w,h)=>(q(),k("div",{key:h,class:"border border-gray-200"},[C("div",Pe,[C("div",Ne,U(w.folder),1),C("div",Ee,[w.isSet?(q(),k("span",Ge)):(q(),k("span",Oe)),C("span",null,U(w.permission),1)])])]))),128)),oe(a(_,{class:"mt-10",loading:e(r),disabled:e(r),onClick:s},{left:d(w=>[a(c,{name:"ArrowRightIcon",class:O(w.class)},null,8,["class"])]),default:d(()=>[P(" "+U(I.$t("wizard.continue")),1)]),_:1},8,["loading","disabled"]),[[re,!e(u)]])]))]),_:1},8,["title","description"])}}},Le=["onSubmit"],We={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Te={props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const u=i,r=j(["sqlite","mysql","pgsql"]),{t:n}=G(),m=ee("utils"),o=A();Q(()=>{for(const g in p.value)u.configData.hasOwnProperty(g)&&(p.value[g]=u.configData[g])});const p=z(()=>o.currentDataBaseData),l=g=>m.checkValidUrl(g),f={database_connection:{required:y.withMessage(n("validation.required"),D)},database_hostname:{required:y.withMessage(n("validation.required"),D)},database_port:{required:y.withMessage(n("validation.required"),D),numeric:ae},database_name:{required:y.withMessage(n("validation.required"),D)},database_username:{required:y.withMessage(n("validation.required"),D)},app_url:{required:y.withMessage(n("validation.required"),D),isUrl:y.withMessage(n("validation.invalid_url"),l)}},s=W(f,p.value);function I(){if(s.value.$touch(),s.value.$invalid)return!0;V("submit-data",p.value)}function t(){s.value.database_connection.$touch(),V("on-change-driver",p.value.database_connection)}return(g,$)=>{const B=b("BaseInput"),c=b("BaseInputGroup"),_=b("BaseMultiselect"),v=b("BaseIcon"),w=b("BaseButton");return q(),k("form",{action:"",onSubmit:T(I,["prevent"])},[C("div",We,[a(c,{label:g.$t("wizard.database.app_url"),error:e(s).app_url.$error&&e(s).app_url.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(p).app_url,"onUpdate:modelValue":$[0]||($[0]=h=>e(p).app_url=h),invalid:e(s).app_url.$error,type:"text"},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(c,{label:g.$t("wizard.database.connection"),error:e(s).database_connection.$error&&e(s).database_connection.$errors[0].$message,required:""},{default:d(()=>[a(_,{modelValue:e(p).database_connection,"onUpdate:modelValue":[$[1]||($[1]=h=>e(p).database_connection=h),t],invalid:e(s).database_connection.$error,options:e(r),"can-deselect":!1,"can-clear":!1},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),a(c,{label:g.$t("wizard.database.port"),error:e(s).database_port.$error&&e(s).database_port.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(p).database_port,"onUpdate:modelValue":$[2]||($[2]=h=>e(p).database_port=h),invalid:e(s).database_port.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(c,{label:g.$t("wizard.database.db_name"),error:e(s).database_name.$error&&e(s).database_name.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(p).database_name,"onUpdate:modelValue":$[3]||($[3]=h=>e(p).database_name=h),invalid:e(s).database_name.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(c,{label:g.$t("wizard.database.username"),error:e(s).database_username.$error&&e(s).database_username.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(p).database_username,"onUpdate:modelValue":$[4]||($[4]=h=>e(p).database_username=h),invalid:e(s).database_username.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(c,{label:g.$t("wizard.database.password")},{default:d(()=>[a(B,{modelValue:e(p).database_password,"onUpdate:modelValue":$[5]||($[5]=h=>e(p).database_password=h),type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),a(c,{label:g.$t("wizard.database.host"),error:e(s).database_hostname.$error&&e(s).database_hostname.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(p).database_hostname,"onUpdate:modelValue":$[6]||($[6]=h=>e(p).database_hostname=h),invalid:e(s).database_hostname.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),a(w,{type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:d(h=>[i.isSaving?E("",!0):(q(),F(v,{key:0,name:"SaveIcon",class:O(h.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(g.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],40,Le)}}},je=["onSubmit"],Re={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Ae={props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const u=i,r=j(["sqlite","mysql","pgsql"]),{t:n}=G(),m=ee("utils"),o=A(),p=z(()=>o.currentDataBaseData);Q(()=>{for(const g in p.value)u.configData.hasOwnProperty(g)&&(p.value[g]=u.configData[g])});const l=g=>m.checkValidUrl(g),f={database_connection:{required:y.withMessage(n("validation.required"),D)},database_hostname:{required:y.withMessage(n("validation.required"),D)},database_port:{required:y.withMessage(n("validation.required"),D),numeric:ae},database_name:{required:y.withMessage(n("validation.required"),D)},database_username:{required:y.withMessage(n("validation.required"),D)},app_url:{required:y.withMessage(n("validation.required"),D),isUrl:y.withMessage(n("validation.invalid_url"),l)}},s=W(f,p.value);function I(){if(s.value.$touch(),s.value.$invalid)return!0;V("submit-data",p.value)}function t(){s.value.database_connection.$touch(),V("on-change-driver",p.value.database_connection)}return(g,$)=>{const B=b("BaseInput"),c=b("BaseInputGroup"),_=b("BaseMultiselect"),v=b("BaseIcon"),w=b("BaseButton");return q(),k("form",{action:"",onSubmit:T(I,["prevent"])},[C("div",Re,[a(c,{label:g.$t("wizard.database.app_url"),"content-loading":i.isFetchingInitialData,error:e(s).app_url.$error&&e(s).app_url.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(p).app_url,"onUpdate:modelValue":$[0]||($[0]=h=>e(p).app_url=h),"content-loading":i.isFetchingInitialData,invalid:e(s).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(c,{label:g.$t("wizard.database.connection"),"content-loading":i.isFetchingInitialData,error:e(s).database_connection.$error&&e(s).database_connection.$errors[0].$message,required:""},{default:d(()=>[a(_,{modelValue:e(p).database_connection,"onUpdate:modelValue":[$[1]||($[1]=h=>e(p).database_connection=h),t],"content-loading":i.isFetchingInitialData,invalid:e(s).database_connection.$error,options:e(r),"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),a(c,{label:g.$t("wizard.database.port"),"content-loading":i.isFetchingInitialData,error:e(s).database_port.$error&&e(s).database_port.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(p).database_port,"onUpdate:modelValue":$[2]||($[2]=h=>e(p).database_port=h),"content-loading":i.isFetchingInitialData,invalid:e(s).database_port.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(c,{label:g.$t("wizard.database.db_name"),"content-loading":i.isFetchingInitialData,error:e(s).database_name.$error&&e(s).database_name.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(p).database_name,"onUpdate:modelValue":$[3]||($[3]=h=>e(p).database_name=h),"content-loading":i.isFetchingInitialData,invalid:e(s).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(c,{label:g.$t("wizard.database.username"),"content-loading":i.isFetchingInitialData,error:e(s).database_username.$error&&e(s).database_username.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(p).database_username,"onUpdate:modelValue":$[4]||($[4]=h=>e(p).database_username=h),"content-loading":i.isFetchingInitialData,invalid:e(s).database_username.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(c,{"content-loading":i.isFetchingInitialData,label:g.$t("wizard.database.password")},{default:d(()=>[a(B,{modelValue:e(p).database_password,"onUpdate:modelValue":$[5]||($[5]=h=>e(p).database_password=h),"content-loading":i.isFetchingInitialData,type:"password"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),a(c,{label:g.$t("wizard.database.host"),"content-loading":i.isFetchingInitialData,error:e(s).database_hostname.$error&&e(s).database_hostname.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(p).database_hostname,"onUpdate:modelValue":$[6]||($[6]=h=>e(p).database_hostname=h),"content-loading":i.isFetchingInitialData,invalid:e(s).database_hostname.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),oe(a(w,{"content-loading":i.isFetchingInitialData,type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:d(h=>[i.isSaving?E("",!0):(q(),F(v,{key:0,name:"SaveIcon",class:O(h.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(g.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[re,!i.isFetchingInitialData]])],40,je)}}},Ye=["onSubmit"],Je={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Ze={props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const u=i,r=j(["sqlite","mysql","pgsql"]),{t:n}=G(),m=ee("utils"),o=A(),p=z(()=>o.currentDataBaseData);Q(()=>{for(const g in p.value)u.configData.hasOwnProperty(g)&&(p.value[g]=u.configData[g])});const l=g=>m.checkValidUrl(g),f={database_connection:{required:y.withMessage(n("validation.required"),D)},database_name:{required:y.withMessage(n("validation.required"),D)},app_url:{required:y.withMessage(n("validation.required"),D),isUrl:y.withMessage(n("validation.invalid_url"),l)}},s=W(f,p.value);function I(){if(s.value.$touch(),s.value.$invalid)return!0;V("submit-data",p.value)}function t(){s.value.database_connection.$touch(),V("on-change-driver",p.value.database_connection)}return(g,$)=>{const B=b("BaseInput"),c=b("BaseInputGroup"),_=b("BaseMultiselect"),v=b("BaseIcon"),w=b("BaseButton");return q(),k("form",{action:"",onSubmit:T(I,["prevent"])},[C("div",Je,[a(c,{label:g.$t("wizard.database.app_url"),"content-loading":i.isFetchingInitialData,error:e(s).app_url.$error&&e(s).app_url.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(p).app_url,"onUpdate:modelValue":$[0]||($[0]=h=>e(p).app_url=h),"content-loading":i.isFetchingInitialData,invalid:e(s).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(c,{label:g.$t("wizard.database.connection"),"content-loading":i.isFetchingInitialData,error:e(s).database_connection.$error&&e(s).database_connection.$errors[0].$message,required:""},{default:d(()=>[a(_,{modelValue:e(p).database_connection,"onUpdate:modelValue":[$[1]||($[1]=h=>e(p).database_connection=h),t],"content-loading":i.isFetchingInitialData,invalid:e(s).database_connection.$error,options:e(r),"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),a(c,{label:g.$t("wizard.database.db_path"),error:e(s).database_name.$error&&e(s).database_name.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[a(B,{modelValue:e(p).database_name,"onUpdate:modelValue":$[2]||($[2]=h=>e(p).database_name=h),"content-loading":i.isFetchingInitialData,invalid:e(s).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","error","content-loading"])]),oe(a(w,{"content-loading":i.isFetchingInitialData,type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:d(h=>[i.isSaving?E("",!0):(q(),F(v,{key:0,name:"SaveIcon",class:O(h.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(g.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[re,!i.isFetchingInitialData]])],40,Ye)}}},Ke={components:{Mysql:Te,Pgsql:Ae,Sqlite:Ze},emits:["next"],setup(i,{emit:V}){const u=M("mysql"),r=M(!1),{t:n}=G(),m=de(),o=A(),p=z(()=>o.currentDataBaseData);async function l(s){let I={connection:s};const t=await o.fetchInstallationDatabase(I);t.data.success&&(p.value.database_connection=t.data.config.database_connection),s==="sqlite"?p.value.database_name=t.data.config.database_name:p.value.database_name=null}async function f(s){r.value=!0;try{let I=await o.addInstallationDatabase(s);if(r.value=!1,I.data.success){await o.addInstallationFinish(),V("next",3),m.showNotification({type:"success",message:n("wizard.success."+I.data.success)});return}else if(I.data.error){if(I.data.requirement){m.showNotification({type:"error",message:n("wizard.errors."+I.data.error,{version:I.data.requirement.minimum,name:s.value.database_connection})});return}m.showNotification({type:"error",message:n("wizard.errors."+I.data.error)})}else I.data.errors?m.showNotification({type:"error",message:I.data.errors[0]}):I.data.error_message&&m.showNotification({type:"error",message:I.data.error_message})}catch{m.showNotification({type:"error",message:n("validation.something_went_wrong")}),r.value=!1}finally{r.value=!1}}return{databaseData:p,database_connection:u,isSaving:r,getDatabaseConfig:l,next:f}}};function Qe(i,V,u,r,n,m){const o=b("BaseWizardStep");return q(),F(o,{title:i.$t("wizard.database.database"),description:i.$t("wizard.database.desc"),"step-container":"w-full p-8 mb-8 bg-white border border-gray-200 border-solid rounded md:w-full"},{default:d(()=>[(q(),F(le(r.databaseData.database_connection),{"config-data":r.databaseData,"is-saving":r.isSaving,onOnChangeDriver:r.getDatabaseConfig,onSubmitData:r.next},null,8,["config-data","is-saving","onOnChangeDriver","onSubmitData"]))]),_:1},8,["title","description"])}var He=se(Ke,[["render",Qe]]);const Xe={class:"w-full md:w-2/3"},ea=C("p",{class:"mt-4 mb-0 text-sm text-gray-600"},"Notes:",-1),aa=C("ul",{class:"w-full text-gray-600 list-disc list-inside"},[C("li",{class:"text-sm leading-8"},[P(" App domain should not contain "),C("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"https://"),P(" or "),C("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"http"),P(" in front of the domain. ")]),C("li",{class:"text-sm leading-8"},[P(" If you're accessing the website on a different port, please mention the port. For example: "),C("b",{class:"inline-block px-1 bg-gray-100"},"localhost:8080")])],-1),ta={emits:["next"],setup(i,{emit:V}){const u=j({app_domain:window.location.origin.replace(/(^\w+:|^)\/\//,"")}),r=M(!1),{t:n}=G(),m=ee("utils"),o=t=>m.checkValidDomainUrl(t),p=A(),l=de(),f={app_domain:{required:y.withMessage(n("validation.required"),D),isUrl:y.withMessage(n("validation.invalid_domain_url"),o)}},s=W(f,z(()=>u));async function I(){if(s.value.$touch(),s.value.$invalid)return!0;r.value=!0;try{await p.setInstallationDomain(u),await p.installationLogin(),(await p.checkAutheticated()).data&&V("next",4),r.value=!1}catch{l.showNotification({type:"error",message:n("wizard.verify_domain.failed")}),r.value=!1}}return(t,g)=>{const $=b("BaseInput"),B=b("BaseInputGroup"),c=b("BaseButton"),_=b("BaseWizardStep");return q(),F(_,{title:t.$t("wizard.verify_domain.title"),description:t.$t("wizard.verify_domain.desc")},{default:d(()=>[C("div",Xe,[a(B,{label:t.$t("wizard.verify_domain.app_domain"),error:e(s).app_domain.$error&&e(s).app_domain.$errors[0].$message,required:""},{default:d(()=>[a($,{modelValue:e(u).app_domain,"onUpdate:modelValue":g[0]||(g[0]=v=>e(u).app_domain=v),invalid:e(s).app_domain.$error,type:"text",onInput:g[1]||(g[1]=v=>e(s).app_domain.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),ea,aa,a(c,{loading:r.value,disabled:r.value,class:"mt-8",onClick:I},{default:d(()=>[P(U(t.$t("wizard.verify_domain.verify_now")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["title","description"])}}},na=["onSubmit"],ia={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},oa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ra={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},la={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},sa={props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){let u=M(!1);const r=j(["tls","ssl","starttls"]),{t:n}=G(),m=X(),o=z(()=>m.smtpConfig),p=z(()=>u.value?"text":"password");o.value.mail_driver="smtp";const l=z(()=>({smtpConfig:{mail_driver:{required:y.withMessage(n("validation.required"),D)},mail_host:{required:y.withMessage(n("validation.required"),D)},mail_port:{required:y.withMessage(n("validation.required"),D),numeric:y.withMessage(n("validation.numbers_only"),ae)},mail_encryption:{required:y.withMessage(n("validation.required"),D)},from_mail:{required:y.withMessage(n("validation.required"),D),email:y.withMessage(n("validation.email_incorrect"),H)},from_name:{required:y.withMessage(n("validation.required"),D)}}})),f=W(l,z(()=>m));async function s(){return f.value.$touch(),f.value.$invalid||V("submit-data",m.smtpConfig),!1}function I(){f.value.smtpConfig.mail_driver.$touch(),V("on-change-driver",m.smtpConfig.mail_driver)}return(t,g)=>{const $=b("BaseMultiselect"),B=b("BaseInputGroup"),c=b("BaseInput"),_=b("BaseIcon"),v=b("BaseButton");return q(),k("form",{onSubmit:T(s,["prevent"])},[C("div",ia,[a(B,{label:t.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(f).smtpConfig.mail_driver.$error&&e(f).smtpConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[a($,{modelValue:e(o).mail_driver,"onUpdate:modelValue":[g[0]||(g[0]=w=>e(o).mail_driver=w),I],options:e(m).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData,invalid:e(f).smtpConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a(B,{label:t.$t("wizard.mail.host"),"content-loading":i.isFetchingInitialData,error:e(f).smtpConfig.mail_host.$error&&e(f).smtpConfig.mail_host.$errors[0].$message,required:""},{default:d(()=>[a(c,{modelValue:e(o).mail_host,"onUpdate:modelValue":g[1]||(g[1]=w=>e(o).mail_host=w),modelModifiers:{trim:!0},invalid:e(f).smtpConfig.mail_host.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",onInput:g[2]||(g[2]=w=>e(f).smtpConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",oa,[a(B,{label:t.$t("wizard.mail.username"),"content-loading":i.isFetchingInitialData},{default:d(()=>[a(c,{modelValue:e(o).mail_username,"onUpdate:modelValue":g[3]||(g[3]=w=>e(o).mail_username=w),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"db_name"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),a(B,{label:t.$t("wizard.mail.password"),"content-loading":i.isFetchingInitialData},{default:d(()=>[a(c,{modelValue:e(o).mail_password,"onUpdate:modelValue":g[6]||(g[6]=w=>e(o).mail_password=w),modelModifiers:{trim:!0},type:e(p),"content-loading":i.isFetchingInitialData,autocomplete:"off","data-lpignore":"true",name:"password"},{right:d(()=>[e(u)?(q(),F(_,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:g[4]||(g[4]=w=>Z(u)?u.value=!e(u):u=!e(u))})):(q(),F(_,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:g[5]||(g[5]=w=>Z(u)?u.value=!e(u):u=!e(u))}))]),_:1},8,["modelValue","type","content-loading"])]),_:1},8,["label","content-loading"])]),C("div",ra,[a(B,{label:t.$t("wizard.mail.port"),error:e(f).smtpConfig.mail_port.$error&&e(f).smtpConfig.mail_port.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[a(c,{modelValue:e(o).mail_port,"onUpdate:modelValue":g[7]||(g[7]=w=>e(o).mail_port=w),modelModifiers:{trim:!0},invalid:e(f).smtpConfig.mail_port.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",onInput:g[8]||(g[8]=w=>e(f).smtpConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),a(B,{label:t.$t("wizard.mail.encryption"),error:e(f).smtpConfig.mail_encryption.$error&&e(f).smtpConfig.mail_encryption.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[a($,{modelValue:e(o).mail_encryption,"onUpdate:modelValue":g[9]||(g[9]=w=>e(o).mail_encryption=w),modelModifiers:{trim:!0},options:e(r),"can-deselect":!1,invalid:e(f).smtpConfig.mail_encryption.$error,"content-loading":i.isFetchingInitialData,onInput:g[10]||(g[10]=w=>e(f).smtpConfig.mail_encryption.$touch())},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),C("div",la,[a(B,{label:t.$t("wizard.mail.from_mail"),error:e(f).smtpConfig.from_mail.$error&&e(f).smtpConfig.from_mail.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[a(c,{modelValue:e(o).from_mail,"onUpdate:modelValue":g[11]||(g[11]=w=>e(o).from_mail=w),modelModifiers:{trim:!0},invalid:e(f).smtpConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",onInput:g[12]||(g[12]=w=>e(f).smtpConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),a(B,{label:t.$t("wizard.mail.from_name"),error:e(f).smtpConfig.from_name.$error&&e(f).smtpConfig.from_name.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[a(c,{modelValue:e(o).from_name,"onUpdate:modelValue":g[13]||(g[13]=w=>e(o).from_name=w),modelModifiers:{trim:!0},invalid:e(f).smtpConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",onInput:g[14]||(g[14]=w=>e(f).smtpConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),a(v,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:d(w=>[i.isSaving?E("",!0):(q(),F(_,{key:0,name:"SaveIcon",class:O(w.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(t.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,na)}}},da=["onSubmit"],ua={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},ma={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},ca={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},ga={props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){let u=M(!1);const r=X(),{t:n}=G(),m=z(()=>r.mailgunConfig),o=z(()=>u.value?"text":"password");m.value.mail_driver="mailgun";const p=z(()=>({mailgunConfig:{mail_driver:{required:y.withMessage(n("validation.required"),D)},mail_mailgun_domain:{required:y.withMessage(n("validation.required"),D)},mail_mailgun_endpoint:{required:y.withMessage(n("validation.required"),D)},mail_mailgun_secret:{required:y.withMessage(n("validation.required"),D)},from_mail:{required:y.withMessage(n("validation.required"),D),email:H},from_name:{required:y.withMessage(n("validation.required"),D)}}})),l=W(p,z(()=>r));function f(){return l.value.$touch(),l.value.$invalid||V("submit-data",r.mailgunConfig),!1}function s(){l.value.mailgunConfig.mail_driver.$touch(),V("on-change-driver",r.mailgunConfig.mail_driver)}return(I,t)=>{const g=b("BaseMultiselect"),$=b("BaseInputGroup"),B=b("BaseInput"),c=b("BaseIcon"),_=b("BaseButton");return q(),k("form",{onSubmit:T(f,["prevent"])},[C("div",ua,[a($,{label:I.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_driver.$error&&e(l).mailgunConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:e(m).mail_driver,"onUpdate:modelValue":[t[0]||(t[0]=v=>e(m).mail_driver=v),s],options:e(r).mail_drivers,"can-deselect":!1,invalid:e(l).mailgunConfig.mail_driver.$error,"content-loading":i.isFetchingInitialData},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.mailgun_domain"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_domain.$error&&e(l).mailgunConfig.mail_mailgun_domain.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(m).mail_mailgun_domain,"onUpdate:modelValue":t[1]||(t[1]=v=>e(m).mail_mailgun_domain=v),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.mail_mailgun_domain.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_domain",onInput:t[2]||(t[2]=v=>e(l).mailgunConfig.mail_mailgun_domain.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",ma,[a($,{label:I.$t("wizard.mail.mailgun_secret"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_secret.$error&&e(l).mailgunConfig.mail_mailgun_secret.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(m).mail_mailgun_secret,"onUpdate:modelValue":t[5]||(t[5]=v=>e(m).mail_mailgun_secret=v),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.mail_mailgun_secret.$error,type:e(o),"content-loading":i.isFetchingInitialData,name:"mailgun_secret",autocomplete:"off","data-lpignore":"true",onInput:t[6]||(t[6]=v=>e(l).mailgunConfig.mail_mailgun_secret.$touch())},{right:d(()=>[e(u)?(q(),F(c,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:t[3]||(t[3]=v=>Z(u)?u.value=!e(u):u=!e(u))})):(q(),F(c,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:t[4]||(t[4]=v=>Z(u)?u.value=!e(u):u=!e(u))}))]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.mailgun_endpoint"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_endpoint.$error&&e(l).mailgunConfig.mail_mailgun_endpoint.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(m).mail_mailgun_endpoint,"onUpdate:modelValue":t[7]||(t[7]=v=>e(m).mail_mailgun_endpoint=v),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.mail_mailgun_endpoint.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_endpoint",onInput:t[8]||(t[8]=v=>e(l).mailgunConfig.mail_mailgun_endpoint.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",ca,[a($,{label:I.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.from_mail.$error&&e(l).mailgunConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(m).from_mail,"onUpdate:modelValue":t[9]||(t[9]=v=>e(m).from_mail=v),modelModifiers:{trim:!0},name:"from_mail",type:"text",invalid:e(l).mailgunConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,onInput:t[10]||(t[10]=v=>e(l).mailgunConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.from_name.$error&&e(l).mailgunConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(m).from_name,"onUpdate:modelValue":t[11]||(t[11]=v=>e(m).from_name=v),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",onInput:t[12]||(t[12]=v=>e(l).mailgunConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),a(_,{loading:I.loading,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:d(v=>[i.isSaving?E("",!0):(q(),F(c,{key:0,name:"SaveIcon",class:O(v.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(I.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,da)}}},pa=["onSubmit"],fa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},va={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},_a={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ba={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},$a={props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const{t:u}=G(),r=j(["tls","ssl","starttls"]);let n=M(!1);const m=X(),o=z(()=>m.sesConfig);o.value.mail_driver="ses";const p=z(()=>({sesConfig:{mail_driver:{required:y.withMessage(u("validation.required"),D)},mail_host:{required:y.withMessage(u("validation.required"),D)},mail_port:{required:y.withMessage(u("validation.required"),D),numeric:ae},mail_ses_key:{required:y.withMessage(u("validation.required"),D)},mail_ses_secret:{required:y.withMessage(u("validation.required"),D)},mail_encryption:{required:y.withMessage(u("validation.required"),D)},from_mail:{required:y.withMessage(u("validation.required"),D),email:y.withMessage(u("validation.email_incorrect"),H)},from_name:{required:y.withMessage(u("validation.required"),D)}}})),l=W(p,z(()=>m));async function f(){return l.value.$touch(),l.value.$invalid||V("submit-data",m.sesConfig),!1}function s(){l.value.sesConfig.mail_driver.$touch(),V("on-change-driver",m.sesConfig.mail_driver)}return(I,t)=>{const g=b("BaseMultiselect"),$=b("BaseInputGroup"),B=b("BaseInput"),c=b("BaseIcon"),_=b("BaseButton");return q(),k("form",{onSubmit:T(f,["prevent"])},[C("div",fa,[a($,{label:I.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_driver.$error&&e(l).sesConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:e(o).mail_driver,"onUpdate:modelValue":[t[0]||(t[0]=v=>e(o).mail_driver=v),s],options:e(m).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData,invalid:e(l).sesConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.host"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_host.$error&&e(l).sesConfig.mail_host.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(o).mail_host,"onUpdate:modelValue":t[1]||(t[1]=v=>e(o).mail_host=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_host.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",onInput:t[2]||(t[2]=v=>e(l).sesConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",va,[a($,{label:I.$t("wizard.mail.port"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_port.$error&&e(l).sesConfig.mail_port.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(o).mail_port,"onUpdate:modelValue":t[3]||(t[3]=v=>e(o).mail_port=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_port.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",onInput:t[4]||(t[4]=v=>e(l).sesConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.encryption"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_encryption.$error&&e(l).sesConfig.mail_encryption.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:e(o).mail_encryption,"onUpdate:modelValue":t[5]||(t[5]=v=>e(o).mail_encryption=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_encryption.$error,options:e(r),"content-loading":i.isFetchingInitialData,onInput:t[6]||(t[6]=v=>e(l).sesConfig.mail_encryption.$touch())},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",_a,[a($,{label:I.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.from_mail.$error&&e(l).sesConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(o).from_mail,"onUpdate:modelValue":t[7]||(t[7]=v=>e(o).from_mail=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",onInput:t[8]||(t[8]=v=>e(l).sesConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.from_name.$error&&e(l).sesConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(o).from_name,"onUpdate:modelValue":t[9]||(t[9]=v=>e(o).from_name=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"name",onInput:t[10]||(t[10]=v=>e(l).sesConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",ba,[a($,{label:I.$t("wizard.mail.ses_key"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_ses_key.$error&&e(l).sesConfig.mail_ses_key.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(o).mail_ses_key,"onUpdate:modelValue":t[11]||(t[11]=v=>e(o).mail_ses_key=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_ses_key.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_ses_key",onInput:t[12]||(t[12]=v=>e(l).sesConfig.mail_ses_key.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a($,{label:I.$t("wizard.mail.ses_secret"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_ses_secret.$error&&e(l).sesConfig.mail_ses_secret.$errors[0].$message,required:""},{default:d(()=>[a(B,{modelValue:e(o).mail_ses_secret,"onUpdate:modelValue":t[15]||(t[15]=v=>e(o).mail_ses_secret=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_ses_secret.$error,type:I.getInputType,"content-loading":i.isFetchingInitialData,name:"mail_ses_secret",autocomplete:"off","data-lpignore":"true",onInput:t[16]||(t[16]=v=>e(l).sesConfig.mail_ses_secret.$touch())},{right:d(()=>[e(n)?(q(),F(c,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:t[13]||(t[13]=v=>Z(n)?n.value=!e(n):n=!e(n))})):(q(),F(c,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:t[14]||(t[14]=v=>Z(n)?n.value=!e(n):n=!e(n))}))]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"])]),a(_,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:d(v=>[i.isSaving?E("",!0):(q(),F(c,{key:0,name:"SaveIcon",class:O(v.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(I.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,pa)}}},wa=["onSubmit"],ha={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ya={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},fe={props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const{t:u}=G(),r=X(),n=z(()=>r.basicMailConfig);z(()=>r.mail_drivers),n.value.mail_driver="mail";const m=z(()=>({basicMailConfig:{mail_driver:{required:y.withMessage(u("validation.required"),D)},from_mail:{required:y.withMessage(u("validation.required"),D),email:y.withMessage(u("validation.email_incorrect"),H)},from_name:{required:y.withMessage(u("validation.required"),D)}}})),o=W(m,z(()=>r));function p(){return o.value.$touch(),o.value.$invalid||V("submit-data",r.basicMailConfig),!1}function l(){o.value.basicMailConfig.mail_driver.$touch(),V("on-change-driver",r?.basicMailConfig?.mail_driver)}return(f,s)=>{const I=b("BaseMultiselect"),t=b("BaseInputGroup"),g=b("BaseInput"),$=b("BaseIcon"),B=b("BaseButton");return q(),k("form",{onSubmit:T(p,["prevent"])},[C("div",ha,[a(t,{label:f.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(o).basicMailConfig.mail_driver.$error&&e(o).basicMailConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[a(I,{modelValue:e(n).mail_driver,"onUpdate:modelValue":[s[0]||(s[0]=c=>e(n).mail_driver=c),l],invalid:e(o).basicMailConfig.mail_driver.$error,options:e(r).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",ya,[a(t,{label:f.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(o).basicMailConfig.from_name.$error&&e(o).basicMailConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:e(n).from_name,"onUpdate:modelValue":s[1]||(s[1]=c=>e(n).from_name=c),modelModifiers:{trim:!0},invalid:e(o).basicMailConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"name",onInput:s[2]||(s[2]=c=>e(o).basicMailConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),a(t,{label:f.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(o).basicMailConfig.from_mail.$error&&e(o).basicMailConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[a(g,{modelValue:e(n).from_mail,"onUpdate:modelValue":s[3]||(s[3]=c=>e(n).from_mail=c),modelModifiers:{trim:!0},invalid:e(o).basicMailConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",onInput:s[4]||(s[4]=c=>e(o).basicMailConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),a(B,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:d(c=>[i.isSaving?E("",!0):(q(),F($,{key:0,name:"SaveIcon",class:O(c.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(f.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,wa)}}},Ia={components:{Smtp:sa,Mailgun:ga,Ses:$a,sendmail:fe,Mail:fe},emits:["next"],setup(i,{emit:V}){const u=M(!1),r=M(!1),n=X();n.mail_driver="mail",o();function m(l){n.mail_driver=l}async function o(){r.value=!0,await n.fetchMailDrivers(),r.value=!1}async function p(l){u.value=!0;let f=await n.updateMailConfig(l);u.value=!1,f.data.success&&await V("next",5)}return{mailDriverStore:n,isSaving:u,isFetchingInitialData:r,changeDriver:m,next:p}}};function qa(i,V,u,r,n,m){const o=b("BaseWizardStep");return q(),F(o,{title:i.$t("wizard.mail.mail_config"),description:i.$t("wizard.mail.mail_config_desc")},{default:d(()=>[C("form",{action:"",onSubmit:V[1]||(V[1]=T((...p)=>r.next&&r.next(...p),["prevent"]))},[(q(),F(le(r.mailDriverStore.mail_driver),{"config-data":r.mailDriverStore.mailConfigData,"is-saving":r.isSaving,"is-fetching-initial-data":r.isFetchingInitialData,onOnChangeDriver:V[0]||(V[0]=p=>r.changeDriver(p)),onSubmitData:r.next},null,8,["config-data","is-saving","is-fetching-initial-data","onSubmitData"]))],32)]),_:1},8,["title","description"])}var Ba=se(Ia,[["render",qa]]);const Ca=["onSubmit"],Va={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},Da={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Sa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Fa={emits:["next"],setup(i,{emit:V}){let u=M(!1);const r=M(!1),n=M(!1);let m=M(""),o=M(null);const p=ge(),l=te(),{t:f}=G(),s=z(()=>p.userForm),I=z(()=>({userForm:{name:{required:y.withMessage(f("validation.required"),D)},email:{required:y.withMessage(f("validation.required"),D),email:y.withMessage(f("validation.email_incorrect"),H)},password:{required:y.withMessage(f("validation.required"),D),minLength:y.withMessage(f("validation.password_min_length",{count:8}),_e(8))},confirm_password:{required:y.withMessage(f("validation.required"),be(p.userForm.password)),sameAsPassword:y.withMessage(f("validation.password_incorrect"),$e(p.userForm.password))}}})),t=W(I,z(()=>p));function g(c,_){o.value=_}function $(){o.value=null}async function B(){if(t.value.userForm.$touch(),t.value.userForm.$invalid)return!0;u.value=!0;let c=await p.updateCurrentUser(s.value);if(u.value=!1,c.data.data){if(o.value){let v=new FormData;v.append("admin_avatar",o.value),await p.uploadAvatar(v)}const _=c.data.data.companies[0];await l.setSelectedCompany(_),V("next",6)}}return(c,_)=>{const v=b("BaseFileUploader"),w=b("BaseInputGroup"),h=b("BaseInput"),x=b("EyeOffIcon"),Y=b("EyeIcon"),J=b("BaseIcon"),K=b("BaseButton"),N=b("BaseWizardStep");return q(),F(N,{title:c.$t("wizard.account_info"),description:c.$t("wizard.account_info_desc")},{default:d(()=>[C("form",{action:"",onSubmit:T(B,["prevent"])},[C("div",Va,[a(w,{label:c.$tc("settings.account_settings.profile_picture")},{default:d(()=>[a(v,{avatar:!0,"preview-image":e(m),onChange:g,onRemove:$},null,8,["preview-image"])]),_:1},8,["label"])]),C("div",Da,[a(w,{label:c.$t("wizard.name"),error:e(t).userForm.name.$error&&e(t).userForm.name.$errors[0].$message,required:""},{default:d(()=>[a(h,{modelValue:e(s).name,"onUpdate:modelValue":_[0]||(_[0]=S=>e(s).name=S),modelModifiers:{trim:!0},invalid:e(t).userForm.name.$error,type:"text",name:"name",onInput:_[1]||(_[1]=S=>e(t).userForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(w,{label:c.$t("wizard.email"),error:e(t).userForm.email.$error&&e(t).userForm.email.$errors[0].$message,required:""},{default:d(()=>[a(h,{modelValue:e(s).email,"onUpdate:modelValue":_[2]||(_[2]=S=>e(s).email=S),modelModifiers:{trim:!0},invalid:e(t).userForm.email.$error,type:"text",name:"email",onInput:_[3]||(_[3]=S=>e(t).userForm.email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),C("div",Sa,[a(w,{label:c.$t("wizard.password"),error:e(t).userForm.password.$error&&e(t).userForm.password.$errors[0].$message,required:""},{default:d(()=>[a(h,{modelValue:e(s).password,"onUpdate:modelValue":_[6]||(_[6]=S=>e(s).password=S),modelModifiers:{trim:!0},invalid:e(t).userForm.password.$error,type:r.value?"text":"password",name:"password",onInput:_[7]||(_[7]=S=>e(t).userForm.password.$touch())},{right:d(()=>[r.value?(q(),F(x,{key:0,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[4]||(_[4]=S=>r.value=!r.value)})):(q(),F(Y,{key:1,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[5]||(_[5]=S=>r.value=!r.value)}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"]),a(w,{label:c.$t("wizard.confirm_password"),error:e(t).userForm.confirm_password.$error&&e(t).userForm.confirm_password.$errors[0].$message,required:""},{default:d(()=>[a(h,{modelValue:e(s).confirm_password,"onUpdate:modelValue":_[10]||(_[10]=S=>e(s).confirm_password=S),modelModifiers:{trim:!0},invalid:e(t).userForm.confirm_password.$error,type:n.value?"text":"password",name:"confirm_password",onInput:_[11]||(_[11]=S=>e(t).userForm.confirm_password.$touch())},{right:d(()=>[n.value?(q(),F(J,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[8]||(_[8]=S=>n.value=!n.value)})):(q(),F(J,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[9]||(_[9]=S=>n.value=!n.value)}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"])]),a(K,{loading:e(u),disabled:e(u),class:"mt-4"},{left:d(S=>[e(u)?E("",!0):(q(),F(J,{key:0,name:"SaveIcon",class:O(S.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(c.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],40,Ca)]),_:1},8,["title","description"])}}},Ma=["onSubmit"],za={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},ka={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ua={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Pa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Na={emits:["next"],setup(i,{emit:V}){let u=M(!1),r=M(!1);const{t:n}=G();let m=M(null),o=M(null),p=M(null);const l=j({name:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""}}),f=te(),s=pe();Q(async()=>{u.value=!0,await s.fetchCountries(),u.value=!1});const I={companyForm:{name:{required:y.withMessage(n("validation.required"),D)},address:{country_id:{required:y.withMessage(n("validation.required"),D)},address_street_1:{maxLength:y.withMessage(n("validation.address_maxlength",{count:255}),ue(255))},address_street_2:{maxLength:y.withMessage(n("validation.address_maxlength",{count:255}),ue(255))}}}},t=W(I,{companyForm:l});function g(c,_,v,w){p.value=w.name,o.value=_}function $(){o.value=null}async function B(){if(t.value.companyForm.$touch(),t.value.$invalid)return!0;if(r.value=!0,f.updateCompany(l)){if(o.value){let _=new FormData;_.append("company_logo",JSON.stringify({name:p.value,data:o.value})),await f.updateCompanyLogo(_)}r.value=!1,V("next",7)}}return(c,_)=>{const v=b("BaseFileUploader"),w=b("BaseInputGroup"),h=b("BaseInput"),x=b("BaseMultiselect"),Y=b("BaseTextarea"),J=b("BaseIcon"),K=b("BaseButton"),N=b("BaseWizardStep");return q(),F(N,{title:c.$t("wizard.company_info"),description:c.$t("wizard.company_info_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:d(()=>[C("form",{action:"",onSubmit:T(B,["prevent"])},[C("div",za,[a(w,{label:c.$tc("settings.company_info.company_logo")},{default:d(()=>[a(v,{base64:"","preview-image":e(m),onChange:g,onRemove:$},null,8,["preview-image"])]),_:1},8,["label"])]),C("div",ka,[a(w,{label:c.$t("wizard.company_name"),error:e(t).companyForm.name.$error&&e(t).companyForm.name.$errors[0].$message,required:""},{default:d(()=>[a(h,{modelValue:e(l).name,"onUpdate:modelValue":_[0]||(_[0]=S=>e(l).name=S),modelModifiers:{trim:!0},invalid:e(t).companyForm.name.$error,type:"text",name:"name",onInput:_[1]||(_[1]=S=>e(t).companyForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),a(w,{label:c.$t("wizard.country"),error:e(t).companyForm.address.country_id.$error&&e(t).companyForm.address.country_id.$errors[0].$message,"content-loading":e(u),required:""},{default:d(()=>[a(x,{modelValue:e(l).address.country_id,"onUpdate:modelValue":_[2]||(_[2]=S=>e(l).address.country_id=S),label:"name",invalid:e(t).companyForm.address.country_id.$error,options:e(s).countries,"value-prop":"id","can-deselect":!1,"can-clear":!1,"content-loading":e(u),placeholder:c.$t("general.select_country"),searchable:"","track-by":"name"},null,8,["modelValue","invalid","options","content-loading","placeholder"])]),_:1},8,["label","error","content-loading"])]),C("div",Ua,[a(w,{label:c.$t("wizard.state")},{default:d(()=>[a(h,{modelValue:e(l).address.state,"onUpdate:modelValue":_[3]||(_[3]=S=>e(l).address.state=S),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),a(w,{label:c.$t("wizard.city")},{default:d(()=>[a(h,{modelValue:e(l).address.city,"onUpdate:modelValue":_[4]||(_[4]=S=>e(l).address.city=S),name:"city",type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),C("div",Pa,[C("div",null,[a(w,{label:c.$t("wizard.address"),error:e(t).companyForm.address.address_street_1.$error&&e(t).companyForm.address.address_street_1.$errors[0].$message},{default:d(()=>[a(Y,{modelValue:e(l).address.address_street_1,"onUpdate:modelValue":_[5]||(_[5]=S=>e(l).address.address_street_1=S),modelModifiers:{trim:!0},invalid:e(t).companyForm.address.address_street_1.$error,placeholder:c.$t("general.street_1"),name:"billing_street1",rows:"2",onInput:_[6]||(_[6]=S=>e(t).companyForm.address.address_street_1.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["label","error"]),a(w,{error:e(t).companyForm.address.address_street_2.$error&&e(t).companyForm.address.address_street_2.$errors[0].$message,class:"mt-1 lg:mt-2 md:mt-2"},{default:d(()=>[a(Y,{modelValue:e(l).address.address_street_2,"onUpdate:modelValue":_[7]||(_[7]=S=>e(l).address.address_street_2=S),invalid:e(t).companyForm.address.address_street_2.$error,placeholder:c.$t("general.street_2"),name:"billing_street2",rows:"2",onInput:_[8]||(_[8]=S=>e(t).companyForm.address.address_street_2.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["error"])]),C("div",null,[a(w,{label:c.$t("wizard.zip_code")},{default:d(()=>[a(h,{modelValue:e(l).address.zip,"onUpdate:modelValue":_[9]||(_[9]=S=>e(l).address.zip=S),modelModifiers:{trim:!0},type:"text",name:"zip"},null,8,["modelValue"])]),_:1},8,["label"]),a(w,{label:c.$t("wizard.phone"),class:"mt-4"},{default:d(()=>[a(h,{modelValue:e(l).address.phone,"onUpdate:modelValue":_[10]||(_[10]=S=>e(l).address.phone=S),modelModifiers:{trim:!0},type:"text",name:"phone"},null,8,["modelValue"])]),_:1},8,["label"])])]),a(K,{loading:e(r),disabled:e(r),class:"mt-4"},{left:d(S=>[e(r)?E("",!0):(q(),F(J,{key:0,name:"SaveIcon",class:O(S.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(c.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],40,Ma)]),_:1},8,["title","description"])}}},Ea=["onSubmit"],Ga={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Oa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},xa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},La={emits:["next"],setup(i,{emit:V}){const u=M(!1);let r=M(!1),n=j({currency:1,language:"en",carbon_date_format:"d M Y",time_zone:"UTC",fiscal_year:"1-12"});const{tm:m,t:o}=G(),p=me();r.value=!0,j([{title:m("settings.customization.invoices.allow"),value:"allow"},{title:m("settings.customization.invoices.disable_on_invoice_partial_paid"),value:"disable_on_invoice_partial_paid"},{title:m("settings.customization.invoices.disable_on_invoice_paid"),value:"disable_on_invoice_paid"},{title:m("settings.customization.invoices.disable_on_invoice_sent"),value:"disable_on_invoice_sent"}]);const l=ce(),f=pe(),s=te(),I=ge(),t=de();let g={key:"fiscal_years"},$={key:"languages"};r.value=!0,Promise.all([f.fetchCurrencies(),f.fetchDateFormats(),f.fetchTimeZones(),f.fetchCountries(),f.fetchConfig(g),f.fetchConfig($)]).then(([v])=>{r.value=!1});const B=z(()=>({currentPreferences:{currency:{required:y.withMessage(o("validation.required"),D)},language:{required:y.withMessage(o("validation.required"),D)},carbon_date_format:{required:y.withMessage(o("validation.required"),D)},time_zone:{required:y.withMessage(o("validation.required"),D)},fiscal_year:{required:y.withMessage(o("validation.required"),D)}}})),c=W(B,{currentPreferences:n});async function _(){if(c.value.currentPreferences.$touch(),c.value.$invalid)return!0;l.openDialog({title:o("general.do_you_wish_to_continue"),message:o("wizard.currency_set_alert"),yesLabel:o("general.ok"),noLabel:o("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(async v=>{if(v){let w={settings:{...n}};u.value=!0,delete w.settings.discount_per_item;let h=await s.updateCompanySettings({data:w});if(h.data){u.value=!1;let x={settings:{language:n.language}};(await I.updateUserSettings(x)).data&&(V("next","COMPLETED"),t.showNotification({type:"success",message:"Login Successful"}),p.push("/admin/dashboard")),we.set("auth.token",h.data.token)}return!0}return u.value=!1,!0})}return(v,w)=>{const h=b("BaseMultiselect"),x=b("BaseInputGroup"),Y=b("BaseIcon"),J=b("BaseButton"),K=b("BaseWizardStep");return q(),F(K,{title:v.$t("wizard.preferences"),description:v.$t("wizard.preferences_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:d(()=>[C("form",{action:"",onSubmit:T(_,["prevent"])},[C("div",null,[C("div",Ga,[a(x,{label:v.$t("wizard.currency"),error:e(c).currentPreferences.currency.$error&&e(c).currentPreferences.currency.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[a(h,{modelValue:e(n).currency,"onUpdate:modelValue":w[0]||(w[0]=N=>e(n).currency=N),"content-loading":e(r),options:e(f).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:v.$tc("settings.currencies.select_currency"),invalid:e(c).currentPreferences.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),a(x,{label:v.$t("settings.preferences.default_language"),error:e(c).currentPreferences.language.$error&&e(c).currentPreferences.language.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[a(h,{modelValue:e(n).language,"onUpdate:modelValue":w[1]||(w[1]=N=>e(n).language=N),"content-loading":e(r),options:e(f).languages,label:"name","value-prop":"code",placeholder:v.$tc("settings.preferences.select_language"),class:"w-full","track-by":"code",searchable:!0,invalid:e(c).currentPreferences.language.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),C("div",Oa,[a(x,{label:v.$t("wizard.date_format"),error:e(c).currentPreferences.carbon_date_format.$error&&e(c).currentPreferences.carbon_date_format.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[a(h,{modelValue:e(n).carbon_date_format,"onUpdate:modelValue":w[2]||(w[2]=N=>e(n).carbon_date_format=N),"content-loading":e(r),options:e(f).dateFormats,label:"display_date","value-prop":"carbon_format_value",placeholder:v.$tc("settings.preferences.select_date_format"),"track-by":"display_date",searchable:"",invalid:e(c).currentPreferences.carbon_date_format.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),a(x,{label:v.$t("wizard.time_zone"),error:e(c).currentPreferences.time_zone.$error&&e(c).currentPreferences.time_zone.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[a(h,{modelValue:e(n).time_zone,"onUpdate:modelValue":w[3]||(w[3]=N=>e(n).time_zone=N),"content-loading":e(r),options:e(f).timeZones,label:"key","value-prop":"value",placeholder:v.$tc("settings.preferences.select_time_zone"),"track-by":"value",searchable:!0,invalid:e(c).currentPreferences.time_zone.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),C("div",xa,[a(x,{label:v.$t("wizard.fiscal_year"),error:e(c).currentPreferences.fiscal_year.$error&&e(c).currentPreferences.fiscal_year.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[a(h,{modelValue:e(n).fiscal_year,"onUpdate:modelValue":w[4]||(w[4]=N=>e(n).fiscal_year=N),"content-loading":e(r),options:e(f).fiscalYears,label:"key","value-prop":"value",placeholder:v.$tc("settings.preferences.select_financial_year"),invalid:e(c).currentPreferences.fiscal_year.$error,"track-by":"key",searchable:!0,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),a(J,{loading:u.value,disabled:u.value,"content-loading":e(r),class:"mt-4"},{left:d(N=>[a(Y,{name:"SaveIcon",class:O(N.class)},null,8,["class"])]),default:d(()=>[P(" "+U(v.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled","content-loading"])])],40,Ea)]),_:1},8,["title","description"])}}};var Wa="/build/img/crater-logo.png";const Ta={components:{step_1:ke,step_2:xe,step_3:He,step_4:ta,step_5:Ba,step_6:Fa,step_7:Na,step_8:La},setup(){let i=M("step_1"),V=M(1);const u=me(),r=A();n();async function n(){let l=await r.fetchInstallationStep();if(l.data.profile_complete==="COMPLETED"){u.push("/admin/dashboard");return}let f=parseInt(l.data.profile_complete);f&&(V.value=f+1,i.value=`step_${f+1}`)}async function m(l){let f={profile_complete:l};try{return await r.addInstallationStep(f),!0}catch(s){return s?.response?.data?.message==="The MAC is invalid."&&window.location.reload(),!1}}async function o(l){if(l&&!await m(l))return!1;V.value++,V.value<=8&&(i.value="step_"+V.value)}function p(l){}return{stepComponent:i,currentStepNumber:V,onStepChange:o,saveStepProgress:m,onNavClick:p}}},ja={class:"flex flex-col items-center justify-between w-full pt-10"},Ra=C("img",{id:"logo-crater",src:Wa,alt:"Crater Logo",class:"h-12 mb-5 md:mb-10"},null,-1);function Aa(i,V,u,r,n,m){const o=b("BaseWizard");return q(),k("div",ja,[Ra,a(o,{steps:7,"current-step":r.currentStepNumber,onClick:r.onNavClick},{default:d(()=>[(q(),F(le(r.stepComponent),{onNext:r.onStepChange},null,8,["onNext"]))]),_:1},8,["current-step","onClick"])])}var Ka=se(Ta,[["render",Aa]]);export{Ka as default};
