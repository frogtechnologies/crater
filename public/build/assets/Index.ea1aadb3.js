import{J,B as _,a0 as X,ah as A,G as K,k as $,aR as O,r as o,o as f,l as b,w as t,f as n,q as k,ag as I,u as l,m as j,i as B,t as c,j as Q,h}from"./vendor.8669b7df.js";import Y from"./BaseTable.990efc67.js";import{_ as Z}from"./CapsuleIcon.0de657ce.js";import{x as ee,w as te}from"./main.8525167c.js";import{u as ae}from"./payment.a4a04de8.js";import{u as ne}from"./global.fc7631dd.js";import"./auth.65253152.js";const le={class:"relative table-container"},oe=["innerHTML"],_e={setup(se){const{tm:me,t:u}=J();let i=_(!1);_("created_at");let v=_(!0),P=_(null);const s=X({payment_mode:"",payment_number:""}),F=A("utils");K();const d=ae(),y=ne(),C=$(()=>!d.totalPayments&&!v.value),M=$(()=>y.currency),D=$(()=>[{key:"payment_date",label:u("payments.date"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"payment_number",label:u("payments.payment_number")},{key:"payment_mode",label:u("payments.payment_mode")},{key:"invoice_number",label:u("invoices.invoice_number")},{key:"amount",label:u("payments.amount")},{key:"actions",label:"",tdClass:"text-right text-sm font-medium",sortable:!1}]);O(s,()=>{E()},{debounce:500});async function H(a){return(await d.fetchPaymentModes(a,y.companySlug)).data.data}async function N({page:a,filter:r,sort:p}){let g={payment_method_id:s.payment_mode!==null?s.payment_mode:"",payment_number:s.payment_number,orderByField:p.fieldName||"created_at",orderBy:p.order||"desc",page:a};v.value=!0;let m=await d.fetchPayments(g,y.companySlug);return v.value=!1,{data:m.data.data,pagination:{totalPages:m.data.meta.last_page,currentPage:a,totalCount:m.data.meta.total,limit:10}}}function T(){P.value.refresh()}function E(){T()}function w(){s.customer="",s.payment_mode="",s.payment_number=""}function G(){i.value&&w(),i.value=!i.value}return(a,r)=>{const p=o("BaseBreadcrumbItem"),g=o("BaseBreadcrumb"),m=o("BaseIcon"),W=o("BaseButton"),z=o("BasePageHeader"),L=o("BaseInput"),S=o("BaseInputGroup"),R=o("BaseMultiselect"),U=o("BaseFilterWrapper"),q=o("BaseEmptyPlaceholder"),V=o("router-link"),x=o("BasePage");return f(),b(x,null,{default:t(()=>[n(z,{title:a.$t("payments.title")},{actions:t(()=>[k(n(W,{variant:"primary-outline",onClick:G},{right:t(e=>[l(i)?(f(),b(m,{key:1,class:j(e.class),name:"XIcon"},null,8,["class"])):(f(),b(m,{key:0,class:j(e.class),name:"FilterIcon"},null,8,["class"]))]),default:t(()=>[B(c(a.$t("general.filter"))+" ",1)]),_:1},512),[[I,l(d).totalPayments]])]),default:t(()=>[n(g,{slot:"breadcrumbs"},{default:t(()=>[n(p,{title:a.$t("general.home"),to:`/${l(y).companySlug}/customer/dashboard`},null,8,["title","to"]),n(p,{title:a.$tc("payments.payment",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),k(n(U,{onClear:w},{default:t(()=>[n(S,{label:a.$t("payments.payment_number"),class:"px-3"},{default:t(()=>[n(L,{modelValue:l(s).payment_number,"onUpdate:modelValue":r[0]||(r[0]=e=>l(s).payment_number=e),placeholder:a.$t("payments.payment_number")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),n(S,{label:a.$t("payments.payment_mode"),class:"px-3"},{default:t(()=>[n(R,{modelValue:l(s).payment_mode,"onUpdate:modelValue":r[1]||(r[1]=e=>l(s).payment_mode=e),"value-prop":"id","track-by":"name","filter-results":!1,label:"name","resolve-on-load":"",delay:100,searchable:"",options:H,placeholder:a.$t("payments.payment_mode")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},512),[[I,l(i)]]),l(C)?(f(),b(q,{key:0,title:a.$t("payments.no_payments"),description:a.$t("payments.list_of_payments")},{default:t(()=>[n(Z,{class:"mt-5 mb-4"})]),_:1},8,["title","description"])):Q("",!0),k(h("div",le,[n(Y,{ref_key:"table",ref:P,data:N,columns:l(D),"placeholder-count":l(d).totalPayments>=20?10:5,class:"mt-10"},{"cell-payment_date":t(({row:e})=>[B(c(e.data.formatted_payment_date),1)]),"cell-payment_number":t(({row:e})=>[n(V,{to:{path:`payments/${e.data.id}/view`},class:"font-medium text-primary-500"},{default:t(()=>[B(c(e.data.payment_number),1)]),_:2},1032,["to"])]),"cell-payment_mode":t(({row:e})=>[h("span",null,c(e.data.payment_method?e.data.payment_method.name:a.$t("payments.not_selected")),1)]),"cell-invoice_number":t(({row:e})=>[h("span",null,c(e.data.invoice?.invoice_number?e.data.invoice?.invoice_number:a.$t("payments.no_invoice")),1)]),"cell-amount":t(({row:e})=>[h("div",{innerHTML:l(F).formatMoney(e.data.amount,l(M))},null,8,oe)]),"cell-actions":t(({row:e})=>[n(ee,null,{activator:t(()=>[n(m,{name:"DotsHorizontalIcon",class:"w-5 text-gray-500"})]),default:t(()=>[n(V,{to:`payments/${e.data.id}/view`},{default:t(()=>[n(te,null,{default:t(()=>[n(m,{name:"EyeIcon",class:"h-5 mr-3 text-gray-600"}),B(" "+c(a.$t("general.view")),1)]),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:1},8,["columns","placeholder-count"])],512),[[I,!l(C)]])]),_:1})}}};export{_e as default};
